@(gameState: models.game.GameState with models.game.RequesteeDoneAnswering)(implicit user: service.User, session: play.api.db.slick.Config.driver.simple.Session)

@import controllers.game.routes.GamesController
@import controllers.game.GameRequest
@import helper._
@import models.user.UserPimped
@import models.organization.Courses

@mainWithBorder("Game Done", tag.courseOpLink(gameState.game.course)) {

    @if(!gameState.game.requestorFinished){
    <h1>You have finished but @gameState.game.requestor.name still needs to finish your quiz.</h1>
    } else {
    <h1>Congratulations you finished a game with @gameState.game.requestor.name</h1>
    }

    @for(requestorQuiz <- gameState.game.requestorQuiz ) {
    <section>
        Your score as a student was @tag.percent(requestorQuiz.studentScore(user)) [<a href="@GamesController.reviewQuiz(gameState.game.id, requestorQuiz.id)">details</a>]
    </section>
    }

    @for(requesteeQuiz <- gameState.game.requesteeQuizIfAnswered ) {
    <section>
        Your score as a teacher was @tag.percent(requesteeQuiz.teacherScore(gameState.game.requestor, gameState.game.requestorSkill)) [<a href="@GamesController.reviewQuiz(gameState.game.id, requesteeQuiz.id)">details</a>]
    </section>
    }

    <section>
    Play another round with @gameState.game.requestor.name
    @for(course <- gameState.game.courseId.flatMap(Courses(_))){
    @form(action = GamesController.requestGame(course.organizationId, course.id), 'class -> "inline-block") {
        <input type="hidden" name="@GameRequest.requestee" value="@gameState.game.requestorId.v">
        <input type="submit" value="Play Again">
        }
    }
    </section>
}
