@(action: play.api.mvc.Call, graphMatchForm: Form[controllers.quiz.multiplechoice.MultipleChoiceQuestionForm], successCallback : List[String] = List(), infoOp: Option[Html] = None)(implicit user: models.user.User, session: play.api.db.slick.Config.driver.simple.Session)

@import helper._
@import controllers.quiz.multiplechoice.MultipleChoiceQuestionForm
@import com.artclod.play.FormEnhanced
@import controllers.MathController
@import com.artclod.mathml.MathMLEq.tightRange

<section>
    Enter a description of the problem, as well as descriptions for answers options. Then mark the correct answer and submit. <br>

    @if(graphMatchForm.hasErrors){ @for(error <- graphMatchForm.errors){<span class="form-error"> Error: @error.message </span><br>} }
    @if(graphMatchForm.hasMessage(MultipleChoiceQuestionForm.explanationInvalid)){<span class="form-error"> Sorry we were unable to create your question since the explanation was not valid markup. </span><br>}

    @form(action, 'id -> "multipleChoiceQuestionForm", 'class -> "pure-form"){
    <fieldset>
        Explanation: @tag.markupEditor(MultipleChoiceQuestionForm.explanation)

        <input type="hidden" name="@MultipleChoiceQuestionForm.correct"      id="@MultipleChoiceQuestionForm.correct"    value="0">
        <input type="hidden" name="@MultipleChoiceQuestionForm.difficulty"   id="@MultipleChoiceQuestionForm.difficulty" value="1">
        <input type="hidden" name="@{MultipleChoiceQuestionForm.options}[0]" id="@{MultipleChoiceQuestionForm.options}[0]"    value="option0">
        <input type="hidden" name="@{MultipleChoiceQuestionForm.options}[1]" id="@{MultipleChoiceQuestionForm.options}[1]"    value="option1">

        <input type="button" class="pure-button" value="Save Question" onclick="MULTIPLE_CHOICE_QUESTION_FORM.formSubmit()">
    </fieldset>
    }

    @for(info <- infoOp){ @info }

    <br class="clearBoth" />

    <script>

        var MULTIPLE_CHOICE_QUESTION_FORM = {}
        MULTIPLE_CHOICE_QUESTION_FORM.formSubmit = function() {
            var ready = true;

            if(true) {
                // noop for now
            } else {
                ready = false;
                alert("Sorry we couldn't understand one of the functions that you wrote. Please try changing it and resubmitting. There is a red icon next to the input box if the system can't understand what you typed.");
            }

            if(ready) {
                $("#multipleChoiceQuestionForm").submit();
            }
        }
    </script>
</section>